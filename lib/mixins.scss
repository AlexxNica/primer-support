// Generate a two-color caret for any element.
// stylelint-disable block-closing-brace-newline-after
@mixin double-caret($foreground: #fff, $background: #ddd) {
  &::after,
  &::before {
    position: absolute;
    top: 11px;
    right: 100%;
    left: -16px;
    display: block;
    width: 0;
    height: 0;
    pointer-events: none;
    content: " ";
    border-color: transparent;
    border-style: solid solid outset;
  }

  &::after {
    margin-top: 1px;
    margin-left: 2px;
    border-width: 7px;
    border-right-color: $foreground;
  }

  &::before {
    border-width: 8px;
    border-right-color: $background;
  }
}

// Responsive media queries
// TODO phase this out in favor of the @breakpoint mixin below
//
// Generate media queries from the Sass map found in the local `variables` file.

@mixin media-min($breakpoint) {
  @if map-has-key($grid-breakpoints, $breakpoint) {
    $min-width: map-get($grid-breakpoints, $breakpoint);
    @media (min-width: $min-width) {
      @content;
    }
  }
}

@mixin media-max($breakpoint) {
  // This ensures that if min and max are used together there won't be a 1px overlap, and eliminates the need to duplicate variables
  @if map-has-key($grid-breakpoints, $breakpoint) {
    $breakpoint-down: map-get($grid-breakpoints, $breakpoint) - 1px;

    @media (max-width: $breakpoint-down) {
      @content;
    }
  }
}

@mixin retina-media-query {
  @media
    only screen and (-webkit-min-device-pixel-ratio: 2),
    only screen and (min--moz-device-pixel-ratio: 2),
    only screen and (-moz-min-device-pixel-ratio: 2),
    only screen and (-o-min-device-pixel-ratio: 2/1),
    only screen and (min-device-pixel-ratio: 2),
    only screen and (min-resolution: 192dpi),
    only screen and (min-resolution: 2dppx) {
    @content;
  }
}

// Breakpoint viewport sizes and media queries.
// TODO replace the media-min and media-max queries above with this.
//
// Breakpoints are defined as a map of (name: minimum width), order from small to large:
//
//    (xs: 0, sm: 544px, md: 768px)
//
// The map defined in the `$grid-breakpoints` global variable is used as the `$breakpoints` argument by default.

// Minimum breakpoint width. Null for the smallest (first) breakpoint.
//
//    >> breakpoint-min(sm, (xs: 0, sm: 544px, md: 768px))
//    544px
@function breakpoint-min($name, $breakpoints: $grid-breakpoints) {
  $min: map-get($breakpoints, $name);
  @return if($min != 0, $min, null);
}

// Media of at least the minimum breakpoint width. No query for the smallest breakpoint.
// Makes the @content apply to the given breakpoint and wider.
@mixin breakpoint($name, $breakpoints: $grid-breakpoints) {
  $min: breakpoint-min($name, $breakpoints);
  @if $min {
    @media (min-width: $min) {
      @content;
    }
  } @else {
    @content;
  }
}

// Clearfix
//
// Clears floats via mixin (avoid using as a class).

@mixin clearfix {
  &::before {
    display: table;
    content: "";
  }

  &::after {
    display: table;
    clear: both;
    content: "";
  }
}

// Text hiding for image based text replacement.
// Higher performance than -9999px because it only renders
// the size of the actual text, not a full 9999px box.
@mixin hide-text() {
  overflow: hidden;
  text-indent: 100%;
  white-space: nowrap;
}

// Heading mixins for use within components
// These match heading utilities in utilities/typography
@mixin h1 {
  font-size: 30px;
  font-weight: bold;
}

@mixin h2 {
  font-size: 21px;
  font-weight: bold;
}

@mixin h3 {
  font-size: 16px;
  font-weight: bold;
}

@mixin h4 {
  font-size: 14px;
  font-weight: bold;
}

@mixin h5 {
  font-size: 12px;
  font-weight: bold;
}

@mixin h6 {
  font-size: 11px;
  font-weight: bold;
}

// Responsive heading mixins
// There are no responsive mixins for h5 and h6 because they are small
// and don't need to be smaller on mobile.
@mixin h1-reponsive {
  font-size: 26px;
  font-weight: bold;

  // Up to 32px in future
  @include breakpoint(md) { font-size: 30px; }

}

@mixin h2-responsive {
  font-size: 20px;
  font-weight: bold;

  // Up to 22px or 24px in future
  @include breakpoint(md) { font-size: 21px; }
}

@mixin h3-responsive {
  font-size: 14px;
  font-weight: bold;

  @include breakpoint(md) { font-size: 16px; }

}

@mixin h4-responsive {
  font-size: 13px;
  font-weight: bold;

  @include breakpoint(md) { font-size: 14px; }

}
